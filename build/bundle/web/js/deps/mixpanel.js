!function(a){function b(){b.done||(b.done=!0,F=!0,B=!1,C.each(O,function(a){a._dom_loaded()}))}function c(){try{k.documentElement.doScroll("left")}catch(a){return void setTimeout(c,1)}b()}var d=Array.prototype,e=Object.prototype,f=d.slice,g=e.toString,h=e.hasOwnProperty,i=window.console,j=window.navigator,k=window.document,l=j.userAgent,m="mixpanel",n="__mps",o="__mpso",p="__mpa",q="__mpap",r="$set",s="$set_once",t="$add",u="$append",v="$people_distinct_id",w="__alias",x=[n,o,p,q,v,w],y="https:"==k.location.protocol?"https://":"http://",z=a&&a.__SV||0,A=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,B=!A&&-1==l.indexOf("MSIE"),C={},D=!1,E={api_host:y+"api.mixpanel.com",cross_subdomain_cookie:!0,cookie_name:"",loaded:function(){},store_google:!0,save_referrer:!0,test:!1,verbose:!1,img:!1,track_pageview:!0,debug:!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_cookie:!1,secure_cookie:!1,ip:!0},F=!1;!function(){var a=d.forEach,b=d.indexOf,c=Array.isArray,e={},i=C.each=function(b,c,d){if(null!=b)if(a&&b.forEach===a)b.forEach(c,d);else if(b.length===+b.length){for(var f=0,g=b.length;g>f;f++)if(f in b&&c.call(d,b[f],f,b)===e)return}else for(var i in b)if(h.call(b,i)&&c.call(d,b[i],i,b)===e)return};C.extend=function(a){return i(f.call(arguments,1),function(b){for(var c in b)void 0!==b[c]&&(a[c]=b[c])}),a},C.isArray=c||function(a){return"[object Array]"===g.call(a)},C.isFunction=function(a){try{return/^\s*\bfunction\b/.test(a)}catch(b){return!1}},C.isArguments=function(a){return!(!a||!h.call(a,"callee"))},C.toArray=function(a){return a?a.toArray?a.toArray():C.isArray(a)?f.call(a):C.isArguments(a)?f.call(a):C.values(a):[]},C.values=function(a){var b=[];return null==a?b:(i(a,function(a){b[b.length]=a}),b)},C.identity=function(a){return a},C.include=function(a,c){var d=!1;return null==a?d:b&&a.indexOf===b?-1!=a.indexOf(c):(i(a,function(a){return d||(d=a===c)?e:void 0}),d)},C.includes=function(a,b){return-1!==a.indexOf(b)}}(),C.inherit=function(a,b){return a.prototype=new b,a.prototype.constructor=a,a.superclass=b.prototype,a},C.isObject=function(a){return a===Object(a)&&!C.isArray(a)},C.isEmptyObject=function(a){if(C.isObject(a)){for(var b in a)if(h.call(a,b))return!1;return!0}return!1},C.isUndefined=function(a){return void 0===a},C.isString=function(a){return"[object String]"==g.call(a)},C.isDate=function(a){return"[object Date]"==g.call(a)},C.isNumber=function(a){return"[object Number]"==g.call(a)},C.encodeDates=function(a){return C.each(a,function(b,c){C.isDate(b)?a[c]=C.formatDate(b):C.isObject(b)&&(a[c]=C.encodeDates(b))}),a},C.formatDate=function(a){function b(a){return 10>a?"0"+a:a}return a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())},C.strip_empty_properties=function(a){var b={};return C.each(a,function(a,c){C.isString(a)&&a.length>0&&(b[c]=a)}),b},C.truncate=function(a,b){var c;return"string"==typeof a?c=a.slice(0,b):C.isArray(a)?(c=[],C.each(a,function(a){c.push(C.truncate(a,b))})):C.isObject(a)?(c={},C.each(a,function(a,d){c[d]=C.truncate(a,b)})):c=a,c},C.JSONEncode=function(){return function(a){var b=a,c=function(a){var b=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return b.lastIndex=0,b.test(a)?'"'+a.replace(b,function(a){var b=c[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'},d=function(a,b){var e="",f="    ",i=0,j="",k="",l=0,m=e,n=[],o=b[a];switch(o&&"object"==typeof o&&"function"==typeof o.toJSON&&(o=o.toJSON(a)),typeof o){case"string":return c(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(e+=f,n=[],"[object Array]"===g.apply(o)){for(l=o.length,i=0;l>i;i+=1)n[i]=d(i,o)||"null";return k=0===n.length?"[]":e?"[\n"+e+n.join(",\n"+e)+"\n"+m+"]":"["+n.join(",")+"]",e=m,k}for(j in o)h.call(o,j)&&(k=d(j,o),k&&n.push(c(j)+(e?": ":":")+k));return k=0===n.length?"{}":e?"{"+n.join(",")+m+"}":"{"+n.join(",")+"}",e=m,k}};return d("",{"":b})}}(),C.JSONDecode=function(){var a,b,c,d,e={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},f=function(b){throw{name:"SyntaxError",message:b,at:a,text:c}},g=function(d){return d&&d!==b&&f("Expected '"+d+"' instead of '"+b+"'"),b=c.charAt(a),a+=1,b},h=function(){var a,c="";for("-"===b&&(c="-",g("-"));b>="0"&&"9">=b;)c+=b,g();if("."===b)for(c+=".";g()&&b>="0"&&"9">=b;)c+=b;if("e"===b||"E"===b)for(c+=b,g(),("-"===b||"+"===b)&&(c+=b,g());b>="0"&&"9">=b;)c+=b,g();return a=+c,isFinite(a)?a:void f("Bad number")},i=function(){var a,c,d,h="";if('"'===b)for(;g();){if('"'===b)return g(),h;if("\\"===b)if(g(),"u"===b){for(d=0,c=0;4>c&&(a=parseInt(g(),16),isFinite(a));c+=1)d=16*d+a;h+=String.fromCharCode(d)}else{if("string"!=typeof e[b])break;h+=e[b]}else h+=b}f("Bad string")},j=function(){for(;b&&" ">=b;)g()},k=function(){switch(b){case"t":return g("t"),g("r"),g("u"),g("e"),!0;case"f":return g("f"),g("a"),g("l"),g("s"),g("e"),!1;case"n":return g("n"),g("u"),g("l"),g("l"),null}f("Unexpected '"+b+"'")},l=function(){var a=[];if("["===b){if(g("["),j(),"]"===b)return g("]"),a;for(;b;){if(a.push(d()),j(),"]"===b)return g("]"),a;g(","),j()}}f("Bad array")},m=function(){var a,c={};if("{"===b){if(g("{"),j(),"}"===b)return g("}"),c;for(;b;){if(a=i(),j(),g(":"),Object.hasOwnProperty.call(c,a)&&f('Duplicate key "'+a+'"'),c[a]=d(),j(),"}"===b)return g("}"),c;g(","),j()}}f("Bad object")};return d=function(){switch(j(),b){case"{":return m();case"[":return l();case'"':return i();case"-":return h();default:return b>="0"&&"9">=b?h():k()}},function(e){var g;return c=e,a=0,b=" ",g=d(),j(),b&&f("Syntax error"),g}}(),C.base64Encode=function(a){var b,c,d,e,f,g,h,i,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",k=0,l=0,m="",n=[];if(!a)return a;a=C.utf8Encode(a);do b=a.charCodeAt(k++),c=a.charCodeAt(k++),d=a.charCodeAt(k++),i=b<<16|c<<8|d,e=i>>18&63,f=i>>12&63,g=i>>6&63,h=63&i,n[l++]=j.charAt(e)+j.charAt(f)+j.charAt(g)+j.charAt(h);while(k<a.length);switch(m=n.join(""),a.length%3){case 1:m=m.slice(0,-2)+"==";break;case 2:m=m.slice(0,-1)+"="}return m},C.utf8Encode=function(a){a=(a+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");var b,c,d,e="",f=0;for(b=c=0,f=a.length,d=0;f>d;d++){var g=a.charCodeAt(d),h=null;128>g?c++:h=g>127&&2048>g?String.fromCharCode(g>>6|192,63&g|128):String.fromCharCode(g>>12|224,g>>6&63|128,63&g|128),null!==h&&(c>b&&(e+=a.substring(b,c)),e+=h,b=c=d+1)}return c>b&&(e+=a.substring(b,a.length)),e},C.UUID=function(){var a=function(){for(var a=1*new Date,b=0;a==1*new Date;)b++;return a.toString(16)+b.toString(16)},b=function(){return Math.random().toString(16).replace(".","")},c=function(){function a(a,b){var c,d=0;for(c=0;c<b.length;c++)d|=e[c]<<8*c;return a^d}var b,c,d=l,e=[],f=0;for(b=0;b<d.length;b++)c=d.charCodeAt(b),e.unshift(255&c),e.length>=4&&(f=a(f,e),e=[]);return e.length>0&&(f=a(f,e)),f.toString(16)};return function(){var d=(screen.height*screen.width).toString(16);return a()+"-"+b()+"-"+c()+"-"+d+"-"+a()}}(),C.isBlockedUA=function(){var a=l;return/(google web preview|baiduspider|yandexbot)/i.test(a)?!0:!1},C.HTTPBuildQuery=function(a,b){var c,d,e=[];return"undefined"==typeof b&&(b="&"),C.each(a,function(a,b){c=encodeURIComponent(a.toString()),d=encodeURIComponent(b),e[e.length]=d+"="+c}),e.join(b)},C.getQueryParam=function(a,b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+b+"=([^&#]*)",d=new RegExp(c),e=d.exec(a);return null===e||e&&"string"!=typeof e[1]&&e[1].length?"":decodeURIComponent(e[1]).replace(/\+/g," ")},C.cookie={get:function(a){for(var b=a+"=",c=k.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(b))return decodeURIComponent(e.substring(b.length,e.length))}return null},parse:function(a){var b;try{b=C.JSONDecode(C.cookie.get(a))||{}}catch(c){}return b},set:function(a,b,c,d,e){var f="",g="",h="";if(d){var i=k.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),j=i?i[0]:"";f=j?"; domain=."+j:""}if(c){var l=new Date;l.setTime(l.getTime()+24*c*60*60*1e3),g="; expires="+l.toGMTString()}e&&(h="; secure"),k.cookie=a+"="+encodeURIComponent(b)+g+"; path=/"+f+h},remove:function(a,b){C.cookie.set(a,"",-1,b)}},C.register_event=function(){function a(a,c,d){var e=function(e){if(e=e||b(window.event),!e)return void 0;var f,g,h=!0;return C.isFunction(d)&&(f=d(e)),g=c.call(a,e),(!1===f||!1===g)&&(h=!1),h};return e}function b(a){return a&&(a.preventDefault=b.preventDefault,a.stopPropagation=b.stopPropagation),a}var c=function(b,c,d,e){if(!b)return void G.error("No valid element provided to register_event");if(b.addEventListener&&!e)b.addEventListener(c,d,!1);else{var f="on"+c,g=b[f];b[f]=a(b,d,g)}};return b.preventDefault=function(){this.returnValue=!1},b.stopPropagation=function(){this.cancelBubble=!0},c}(),C.dom_query=function(){function a(a){return a.all?a.all:a.getElementsByTagName("*")}function b(a,b){var c=" "+b+" ";return(" "+a.className+" ").replace(d," ").indexOf(c)>=0}function c(c){if(!k.getElementsByTagName)return new Array;for(var d,e=c.split(" "),f=new Array(k),g=0;g<e.length;g++)if(d=e[g].replace(/^\s+/,"").replace(/\s+$/,""),d.indexOf("#")>-1){var h=d.split("#"),i=h[0],j=h[1],l=k.getElementById(j);if(!l||i&&l.nodeName.toLowerCase()!=i)return new Array;f=new Array(l)}else if(d.indexOf(".")>-1){var h=d.split("."),i=h[0],m=h[1];i||(i="*");for(var n=new Array,o=0,p=0;p<f.length;p++){var q;q="*"==i?a(f[p]):f[p].getElementsByTagName(i);for(var r=0;r<q.length;r++)n[o++]=q[r]}f=new Array;for(var s=0,t=0;t<n.length;t++)n[t].className&&C.isString(n[t].className)&&b(n[t],m)&&(f[s++]=n[t])}else if(d.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/)){var i=RegExp.$1,u=RegExp.$2,v=RegExp.$3,w=RegExp.$4;i||(i="*");for(var n=new Array,o=0,p=0;p<f.length;p++){var q;q="*"==i?a(f[p]):f[p].getElementsByTagName(i);for(var r=0;r<q.length;r++)n[o++]=q[r]}f=new Array;var x,s=0;switch(v){case"=":x=function(a){return a.getAttribute(u)==w};break;case"~":x=function(a){return a.getAttribute(u).match(new RegExp("\\b"+w+"\\b"))};break;case"|":x=function(a){return a.getAttribute(u).match(new RegExp("^"+w+"-?"))};break;case"^":x=function(a){return 0==a.getAttribute(u).indexOf(w)};break;case"$":x=function(a){return a.getAttribute(u).lastIndexOf(w)==a.getAttribute(u).length-w.length};break;case"*":x=function(a){return a.getAttribute(u).indexOf(w)>-1};break;default:x=function(a){return a.getAttribute(u)}}f=new Array,s=0;for(var t=0;t<n.length;t++)x(n[t])&&(f[s++]=n[t])}else{i=d;for(var n=new Array,o=0,p=0;p<f.length;p++)for(var q=f[p].getElementsByTagName(i),r=0;r<q.length;r++)n[o++]=q[r];f=n}return f}var d=/[\t\r\n]/g;return c}(),C.info={campaignParams:function(){var a="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),b="",c={};return C.each(a,function(a){b=C.getQueryParam(k.URL,a),b.length&&(c[a]=b)}),c},searchEngine:function(a){return 0===a.search("https?://(.*)google.([^/?]*)")?"google":0===a.search("https?://(.*)bing.com")?"bing":0===a.search("https?://(.*)yahoo.com")?"yahoo":0===a.search("https?://(.*)duckduckgo.com")?"duckduckgo":null},searchInfo:function(a){var b=C.info.searchEngine(a),c="yahoo"!=b?"q":"p",d={};if(null!==b){d.$search_engine=b;var e=C.getQueryParam(a,c);e.length&&(d.mp_keyword=e)}return d},browser:function(){var a=l,b=j.vendor||"";return window.opera?C.includes(a,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(a)?"BlackBerry":C.includes(a,"Chrome")?"Chrome":C.includes(b,"Apple")?C.includes(a,"Mobile")?"Mobile Safari":"Safari":C.includes(a,"Android")?"Android Mobile":C.includes(a,"Konqueror")?"Konqueror":C.includes(a,"Firefox")?"Firefox":C.includes(a,"MSIE")?"Internet Explorer":C.includes(a,"Gecko")?"Mozilla":""},os:function(){var a=l;return/Windows/i.test(a)?/Phone/.test(a)?"Windows Mobile":"Windows":/(iPhone|iPad|iPod)/.test(a)?"iOS":/Android/.test(a)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(a)?"BlackBerry":/Mac/i.test(a)?"Mac OS X":/Linux/.test(a)?"Linux":""},device:function(){var a=l;return/iPhone/.test(a)?"iPhone":/iPad/.test(a)?"iPad":/iPod/.test(a)?"iPod Touch":/(BlackBerry|PlayBook|BB10)/i.test(a)?"BlackBerry":/Windows Phone/i.test(a)?"Windows Phone":/Android/.test(a)?"Android":""},referringDomain:function(a){var b=a.split("/");return b.length>=3?b[2]:""},properties:function(){return C.strip_empty_properties({$os:C.info.os(),$browser:C.info.browser(),$referrer:k.referrer,$referring_domain:C.info.referringDomain(k.referrer),$device:C.info.device(),mp_lib:"web"})},people_properties:function(){return C.strip_empty_properties({$os:C.info.os(),$browser:C.info.browser()})},pageviewInfo:function(a){return C.strip_empty_properties({mp_page:a,mp_referrer:k.referrer,mp_browser:C.info.browser(),mp_platform:C.info.os()})}};var G={log:function(){if(D&&!C.isUndefined(i)&&i)try{i.log.apply(i,arguments)}catch(a){C.each(arguments,function(a){i.log(a)})}},error:function(){if(D&&!C.isUndefined(i)&&i){var a=["Mixpanel error:"].concat(C.toArray(arguments));try{i.error.apply(i,a)}catch(b){C.each(a,function(a){i.error(a)})}}},critical:function(){if(!C.isUndefined(i)&&i){var a=["Mixpanel error:"].concat(C.toArray(arguments));try{i.error.apply(i,a)}catch(b){C.each(a,function(a){i.error(a)})}}}},H=function(){};H.prototype.create_properties=function(){},H.prototype.event_handler=function(){},H.prototype.after_track_handler=function(){},H.prototype.init=function(a){return this.mp=a,this},H.prototype.track=function(a,b,c,d){var e=this,f=C.dom_query(a);return 0==f.length?void G.error("The DOM query ("+a+") returned 0 elements"):(C.each(f,function(a){C.register_event(a,this.override_event,function(a){var f={},g=e.create_properties(c,this),h=e.mp.get_config("track_links_timeout");e.event_handler(a,this,f),window.setTimeout(e.track_callback(d,g,f,!0),h),e.mp.track(b,g,e.track_callback(d,g,f))})},this),!0)},H.prototype.track_callback=function(a,b,c,d){d=d||!1;var e=this;return function(){c.callback_fired||(c.callback_fired=!0,a&&a(d,b)===!1||e.after_track_handler(b,c,d))}},H.prototype.create_properties=function(a,b){var c;return c="function"==typeof a?a(b):C.extend({},a)};var I=function(){this.override_event="click"};C.inherit(I,H),I.prototype.create_properties=function(a,b){var c=I.superclass.create_properties.apply(this,arguments);return b.href&&(c.url=b.href),c},I.prototype.event_handler=function(a,b,c){c.new_tab=2===a.which||a.metaKey||"_blank"===b.target,c.href=b.href,c.new_tab||a.preventDefault()},I.prototype.after_track_handler=function(a,b){b.new_tab||setTimeout(function(){window.location=b.href},0)};var J=function(){this.override_event="submit"};C.inherit(J,H),J.prototype.event_handler=function(a,b,c){c.element=b,a.preventDefault()},J.prototype.after_track_handler=function(a,b){setTimeout(function(){b.element.submit()},0)};var K=function(a){this.props={},this.campaign_params_saved=!1,this.name=a.cookie_name?"mp_"+a.cookie_name:"mp_"+a.token+"_mixpanel",this.load(),this.update_config(a),this.upgrade(a),this.save()};K.prototype.properties=function(){var a={};return C.each(this.props,function(b,c){C.include(x,c)||(a[c]=b)}),a},K.prototype.load=function(){if(!this.disabled){var a=C.cookie.parse(this.name);a&&(this.props=C.extend({},a))}},K.prototype.upgrade=function(a){var b,c,d=a.upgrade;d&&(b="mp_super_properties","string"==typeof d&&(b=d),c=C.cookie.parse(b),C.cookie.remove(b),C.cookie.remove(b,!0),c&&(this.props=C.extend(this.props,c.all,c.events))),a.cookie_name||"mixpanel"===a.name||(b="mp_"+a.token+"_"+a.name,c=C.cookie.parse(b),c&&(C.cookie.remove(b),C.cookie.remove(b,!0),this.register_once(c)))},K.prototype.save=function(){this.disabled||C.cookie.set(this.name,C.JSONEncode(this.props),this.expire_days,this.cross_subdomain,this.secure)},K.prototype.remove=function(){C.cookie.remove(this.name,!1),C.cookie.remove(this.name,!0)},K.prototype.clear=function(){this.remove(),this.props={}},K.prototype.register_once=function(a,b,c){return C.isObject(a)?("undefined"==typeof b&&(b="None"),this.expire_days="undefined"==typeof c?this.default_expiry:c,C.each(a,function(a,c){this.props[c]&&this.props[c]!==b||(this.props[c]=a)},this),this.save(),!0):!1},K.prototype.register=function(a,b){return C.isObject(a)?(this.expire_days="undefined"==typeof b?this.default_expiry:b,C.extend(this.props,a),this.save(),!0):!1},K.prototype.unregister=function(a){a in this.props&&(delete this.props[a],this.save())},K.prototype.update_campaign_params=function(){this.campaign_params_saved||(this.register_once(C.info.campaignParams()),this.campaign_params_saved=!0)},K.prototype.update_search_keyword=function(a){this.register(C.info.searchInfo(a))},K.prototype.update_referrer_info=function(a){this.register_once({$initial_referrer:a||"$direct",$initial_referring_domain:C.info.referringDomain(a)||"$direct"},"")},K.prototype.get_referrer_info=function(){return C.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})},K.prototype.safe_merge=function(a){return C.each(this.props,function(b,c){c in a||(a[c]=b)}),a},K.prototype.update_config=function(a){this.default_expiry=this.expire_days=a.cookie_expiration,this.set_disabled(a.disable_cookie),this.set_cross_subdomain(a.cross_subdomain_cookie),this.set_secure(a.secure_cookie)},K.prototype.set_disabled=function(a){this.disabled=a,this.disabled&&this.remove()},K.prototype.set_cross_subdomain=function(a){a!==this.cross_subdomain&&(this.cross_subdomain=a,this.remove(),this.save())},K.prototype.get_cross_subdomain=function(){return this.cross_subdomain},K.prototype.set_secure=function(a){a!==this.secure&&(this.secure=a?!0:!1,this.remove(),this.save())},K.prototype._add_to_people_queue=function(a,b){var c=this._get_queue_key(a),d=b[a],e=this._get_or_create_queue(r),f=this._get_or_create_queue(s),g=this._get_or_create_queue(t),h=this._get_or_create_queue(u,[]);c===n?(C.extend(e,d),this._pop_from_people_queue(t,d)):c===o?C.each(d,function(a,b){b in f||(f[b]=a)}):c===p?C.each(d,function(a,b){b in e?e[b]+=a:(b in g||(g[b]=0),g[b]+=a)},this):c===q&&h.push(d),G.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"),G.log(b),this.save()},K.prototype._pop_from_people_queue=function(a,b){var c=this._get_queue(a);C.isUndefined(c)||(C.each(b,function(a,b){delete c[b]},this),this.save())},K.prototype._get_queue_key=function(a){return a===r?n:a===s?o:a===t?p:a===u?q:void G.error("Invalid queue:",a)},K.prototype._get_queue=function(a){return this.props[this._get_queue_key(a)]},K.prototype._get_or_create_queue=function(a,b){var c=this._get_queue_key(a),b=C.isUndefined(b)?{}:b;return this.props[c]||(this.props[c]=b)};var L=function(b,c,d){var e,f=d===m?a:a[d];return f&&!C.isArray(f)?void G.error("You have already initialized "+d):(e=new M,e._init(b,c,d),e.people=new N,e.people._init(e),D=D||e.get_config("debug"),C.isUndefined(f)||(e._execute_array.call(e.people,f.people),e._execute_array(f)),e)},M=function(){};M.prototype.init=function(b,c,d){if("undefined"==typeof d)return void G.error("You must name your new library: init(token, config, name)");if(d===m)return void G.error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet");var e=L(b,c,d);return a[d]=e,e._loaded(),e},M.prototype._init=function(a,b,c){this.__loaded=!0,this.config={},this.set_config(C.extend({},E,b,{name:c,token:a,callback_fn:(c===m?c:m+"."+c)+"._jsc"})),this._jsc=function(){},this.__dom_loaded_queue=[],this.__request_queue=[],this.__disabled_events=[],this._flags={disable_all_events:!1,identify_called:!1},this.cookie=new K(this.config),this.register_once({distinct_id:C.UUID()},"")},M.prototype._loaded=function(){this.get_config("loaded")(this),this.get_config("track_pageview")&&this.track_pageview()},M.prototype._dom_loaded=function(){C.each(this.__dom_loaded_queue,function(a){this._track_dom.apply(this,a)},this),C.each(this.__request_queue,function(a){this._send_request.apply(this,a)},this),delete this.__dom_loaded_queue,delete this.__request_queue},M.prototype._track_dom=function(a,b){if(this.get_config("img"))return G.error("You can't use DOM tracking functions with img = true."),!1;if(!F)return this.__dom_loaded_queue.push([a,b]),!1;var c=(new a).init(this);return c.track.apply(c,b)},M.prototype._prepare_callback=function(a,b){if(C.isUndefined(a))return null;if(A){var c=function(c){a(c,b)};return c}var d=this._jsc,e=""+Math.floor(1e8*Math.random()),f=this.get_config("callback_fn")+'["'+e+'"]';return d[e]=function(c){delete d[e],a(c,b)},f},M.prototype._send_request=function(a,b,c){if(B)return void this.__request_queue.push(arguments);var d=this.get_config("verbose");if(this.get_config("test")&&(b.test=1),d&&(b.verbose=1),this.get_config("img")&&(b.img=1),A||(c?b.callback=c:(d||this.get_config("test"))&&(b.callback="(function(){})")),b.ip=this.get_config("ip")?1:0,b._=(new Date).getTime().toString(),a+="?"+C.HTTPBuildQuery(b),"img"in b){var e=k.createElement("img");e.src=a,k.body.appendChild(e)}else if(A){var f=new XMLHttpRequest;f.open("GET",a,!0),f.withCredentials=!0,f.onreadystatechange=function(){if(4===f.readyState)if(200===f.status)c&&c(d?C.JSONDecode(f.responseText):Number(f.responseText));else{var a="Bad HTTP status: "+f.status+" "+f.statusText;G.error(a),c&&c(d?{status:0,error:a}:0)}},f.send(null)}else{var g=k.createElement("script");g.type="text/javascript",g.async=!0,g.defer=!0,g.src=a;var h=k.getElementsByTagName("script")[0];h.parentNode.insertBefore(g,h)}},M.prototype._execute_array=function(a){var b,c=[],d=[],e=[];C.each(a,function(a){a&&(b=a[0],"function"==typeof a?a.call(this):C.isArray(a)&&"alias"===b?c.push(a):C.isArray(a)&&-1!=b.indexOf("track")&&"function"==typeof this[b]?e.push(a):d.push(a))},this);var f=function(a,b){C.each(a,function(a){this[a[0]].apply(this,a.slice(1))},b)};f(c,this),f(d,this),f(e,this)},M.prototype.push=function(a){this._execute_array([a])},M.prototype.disable=function(a){"undefined"==typeof a?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(a)},M.prototype.track=function(a,b,c){if("undefined"==typeof a)return void G.error("No event name provided to mixpanel.track");if(C.isBlockedUA()||this._flags.disable_all_events||C.include(this.__disabled_events,a))return void("undefined"!=typeof c&&c(0));b=b||{},b.token=b.token||this.get_config("token"),this.cookie.update_search_keyword(k.referrer),this.get_config("store_google")&&this.cookie.update_campaign_params(),this.get_config("save_referrer")&&this.cookie.update_referrer_info(k.referrer),b=C.extend({},C.info.properties(),this.cookie.properties(),b);var d={event:a,properties:b},e=C.truncate(d,255),f=C.JSONEncode(e),g=C.base64Encode(f);return G.log("MIXPANEL REQUEST:"),G.log(e),this._send_request(this.get_config("api_host")+"/track/",{data:g},this._prepare_callback(c,e)),e},M.prototype.track_pageview=function(a){"undefined"==typeof a&&(a=k.location.href),this.track("mp_page_view",C.info.pageviewInfo(a))},M.prototype.track_links=function(){return this._track_dom.call(this,I,arguments)},M.prototype.track_forms=function(){return this._track_dom.call(this,J,arguments)},M.prototype.register=function(a,b){this.cookie.register(a,b)},M.prototype.register_once=function(a,b,c){this.cookie.register_once(a,b,c)},M.prototype.unregister=function(a){this.cookie.unregister(a)},M.prototype._register_single=function(a,b){var c={};c[a]=b,this.register(c)},M.prototype.identify=function(a,b,c,d,e){a!=this.get_distinct_id()&&a!=this.get_property(w)&&(this.unregister(w),this._register_single("distinct_id",a)),this._flags.identify_called=!0,this.people._flush(b,c,d,e)},M.prototype.get_distinct_id=function(){return this.get_property("distinct_id")},M.prototype.alias=function(a,b){if(a===this.get_property(v))return G.critical("Attempting to create alias for existing People user - aborting."),-2;var c=this;return C.isUndefined(b)&&(b=this.get_distinct_id()),a!==b?(this._register_single(w,a),this.track("$create_alias",{alias:a,distinct_id:b},function(){c.identify(a)})):(G.error("alias matches current distinct_id - skipping api call."),this.identify(a),-1)},M.prototype.name_tag=function(a){this._register_single("mp_name_tag",a)},M.prototype.set_config=function(a){C.isObject(a)&&(C.extend(this.config,a),this.cookie&&this.cookie.update_config(this.config),D=D||this.get_config("debug"))},M.prototype.get_config=function(a){return this.config[a]},M.prototype.get_property=function(a){return this.cookie.props[a]},M.prototype.toString=function(){var a=this.get_config("name");return a!==m&&(a=m+"."+a),a};var N=function(){};if(N.prototype._init=function(a){this._mixpanel=a},N.prototype.set=function(a,b,c){var d={},e={};return C.isObject(a)?(C.each(a,function(a,b){"$distinct_id"!=b&&"$token"!=b&&(e[b]=a)}),c=b):e[a]=b,this._get_config("save_referrer")&&this._mixpanel.cookie.update_referrer_info(k.referrer),e=C.extend({},C.info.people_properties(),this._mixpanel.cookie.get_referrer_info(),e),d[r]=e,this._send_request(d,c)},N.prototype.set_once=function(a,b,c){var d={},e={};return C.isObject(a)?(C.each(a,function(a,b){"$distinct_id"!=b&&"$token"!=b&&(e[b]=a)}),c=b):e[a]=b,d[s]=e,this._send_request(d,c)},N.prototype.increment=function(a,b,c){var d={},e={};return C.isObject(a)?(C.each(a,function(a,b){return"$distinct_id"!=b&&"$token"!=b?isNaN(parseFloat(a))?void G.error("Invalid increment value passed to mixpanel.people.increment - must be a number"):void(e[b]=a):void 0}),c=b):(C.isUndefined(b)&&(b=1),e[a]=b),d[t]=e,this._send_request(d,c)},N.prototype.append=function(a,b,c){var d={},e={};return C.isObject(a)?(C.each(a,function(a,b){"$distinct_id"!=b&&"$token"!=b&&(e[b]=a)}),c=b):e[a]=b,d[u]=e,this._send_request(d,c)},N.prototype.track_charge=function(a,b,c){return!C.isNumber(a)&&(a=parseFloat(a),isNaN(a))?void G.error("Invalid value passed to mixpanel.people.track_charge - must be a number"):this.append("$transactions",C.extend({$amount:a},b),c)},N.prototype.clear_charges=function(a){return this.set("$transactions",[],a)},N.prototype.delete_user=function(){if(!this._identify_called())return void G.error("mixpanel.people.delete_user() requires you to call identify() first");var a={$delete:this._mixpanel.get_distinct_id()};return this._send_request(a)},N.prototype.toString=function(){return this._mixpanel.toString()+".people"},N.prototype._send_request=function(a,b){a.$token=this._get_config("token"),a.$distinct_id=this._mixpanel.get_distinct_id();var c=C.encodeDates(a),d=C.truncate(c,255),e=C.JSONEncode(c),f=C.base64Encode(e);return this._identify_called()?(G.log("MIXPANEL PEOPLE REQUEST:"),G.log(d),this._mixpanel._send_request(this._get_config("api_host")+"/engage/",{data:f},this._mixpanel._prepare_callback(b,d)),d):(this._enqueue(a),C.isUndefined(b)||b(this._get_config("verbose")?{status:-1,error:null}:-1),d)},N.prototype._get_config=function(a){return this._mixpanel.get_config(a)},N.prototype._identify_called=function(){return this._mixpanel._flags.identify_called===!0},N.prototype._enqueue=function(a){r in a?this._mixpanel.cookie._add_to_people_queue(r,a):s in a?this._mixpanel.cookie._add_to_people_queue(s,a):t in a?this._mixpanel.cookie._add_to_people_queue(t,a):u in a?this._mixpanel.cookie._add_to_people_queue(u,a):G.error("Invalid call to _enqueue():",a)},N.prototype._flush=function(a,b,c,d){var e=this,f=C.extend({},this._mixpanel.cookie._get_queue(r)),g=C.extend({},this._mixpanel.cookie._get_queue(s)),h=C.extend({},this._mixpanel.cookie._get_queue(t)),i=this._mixpanel.cookie._get_queue(u);if(C.isUndefined(f)||!C.isObject(f)||C.isEmptyObject(f)||(e._mixpanel.cookie._pop_from_people_queue(r,f),this.set(f,function(b,c){0==b&&e._mixpanel.cookie._add_to_people_queue(r,f),C.isUndefined(a)||a(b,c)})),C.isUndefined(g)||!C.isObject(g)||C.isEmptyObject(g)||(e._mixpanel.cookie._pop_from_people_queue(s,g),this.set_once(g,function(a,b){0==a&&e._mixpanel.cookie._add_to_people_queue(s,g),C.isUndefined(d)||d(a,b)})),C.isUndefined(h)||!C.isObject(h)||C.isEmptyObject(h)||(e._mixpanel.cookie._pop_from_people_queue(t,h),this.increment(h,function(a,c){0==a&&e._mixpanel.cookie._add_to_people_queue(t,h),C.isUndefined(b)||b(a,c)})),!C.isUndefined(i)&&C.isArray(i)&&i.length){for(var j=i.length-1;j>=0;j--){var k=i.pop();e.append(k,function(a,b){0==a&&e._mixpanel.cookie._add_to_people_queue(u,k),C.isUndefined(c)||c(a,b)})}e._mixpanel.cookie.save()}},C.toArray=C.toArray,C.isObject=C.isObject,C.JSONEncode=C.JSONEncode,C.JSONDecode=C.JSONDecode,C.isEmptyObject=C.isEmptyObject,M.prototype.init=M.prototype.init,M.prototype.disable=M.prototype.disable,M.prototype.track=M.prototype.track,M.prototype.track_links=M.prototype.track_links,M.prototype.track_forms=M.prototype.track_forms,M.prototype.track_pageview=M.prototype.track_pageview,M.prototype.register=M.prototype.register,M.prototype.register_once=M.prototype.register_once,M.prototype.unregister=M.prototype.unregister,M.prototype.identify=M.prototype.identify,M.prototype.alias=M.prototype.alias,M.prototype.name_tag=M.prototype.name_tag,M.prototype.set_config=M.prototype.set_config,M.prototype.get_config=M.prototype.get_config,M.prototype.get_property=M.prototype.get_property,M.prototype.get_distinct_id=M.prototype.get_distinct_id,M.prototype.toString=M.prototype.toString,K.prototype.properties=K.prototype.properties,K.prototype.update_search_keyword=K.prototype.update_search_keyword,K.prototype.update_referrer_info=K.prototype.update_referrer_info,K.prototype.get_cross_subdomain=K.prototype.get_cross_subdomain,K.prototype.clear=K.prototype.clear,N.prototype.set=N.prototype.set,N.prototype.set_once=N.prototype.set_once,N.prototype.increment=N.prototype.increment,N.prototype.append=N.prototype.append,N.prototype.track_charge=N.prototype.track_charge,N.prototype.clear_charges=N.prototype.clear_charges,N.prototype.delete_user=N.prototype.delete_user,N.prototype.toString=N.prototype.toString,C.isUndefined(a))return void G.critical("'mixpanel' object not initialized. Ensure you are using the latest version of the Mixpanel JS Library along with the snippet we provide.");if(a.__loaded||a.config&&a.cookie)return void G.error("Mixpanel library has already been downloaded at least once.");if(1.1>z)return void G.critical("Version mismatch; please ensure you're using the latest version of the Mixpanel code snippet.");var O={};C.each(a._i,function(a){var b,c;a&&C.isArray(a)&&(b=a[a.length-1],c=L.apply(this,a),O[b]=c)});var P=function(){C.each(O,function(b,c){c!==m&&(a[c]=b)}),a._=C};if(a.init=function(b,c,d){if(d)a[d]||(a[d]=O[d]=L(b,c,d),a[d]._loaded());else{var e=a;O[m]?e=O[m]:b&&(e=L(b,c,m)),window[m]=a=e,P()}},a.init(),C.each(O,function(a){a._loaded()}),k.addEventListener)"complete"==k.readyState?b():k.addEventListener("DOMContentLoaded",b,!1);else if(k.attachEvent){k.attachEvent("onreadystatechange",b);var Q=!1;try{Q=null==window.frameElement}catch(R){}k.documentElement.doScroll&&Q&&c()}C.register_event(window,"load",b,!0)}(window.mixpanel);